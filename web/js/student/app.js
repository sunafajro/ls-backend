(function(e){function t(t){for(var n,i,o=t[0],l=t[1],u=t[2],d=0,f=[];d<o.length;d++)i=o[d],s[i]&&f.push(s[i][0]),s[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);c&&c(t);while(f.length)f.shift()();return a.push.apply(a,u||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,o=1;o<r.length;o++){var l=r[o];0!==s[l]&&(n=!1)}n&&(a.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},s={app:0},a=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var c=l;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"56d7":function(e,t,r){"use strict";r.r(t);r("cadf"),r("551c"),r("097d");var n=r("2b0e"),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"row"},[r("div",{staticClass:"col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12"},[e.loading?r("div",{staticClass:"alert alert-warning"},[e._v("Идет загрузка данных...")]):e._e(),e.error?r("div",{staticClass:"alert alert-danger"},[e._v("Произошла непредвиденная ошибка!")]):e._e()]),e.loading?e._e():r("Sidebar",{attrs:{filter:e.filter,setFilter:e.setFilter,user:e.user,years:e.years}}),e.loading?e._e():r("Content",{attrs:{columns:e.columns,rows:e.rows}})],1)},a=[],i=(r("c5f6"),r("ac6a"),r("96cf"),r("3040")),o=r("bc3a"),l=r.n(o),u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"col-xs-12 col-sm-12 col-md-10 col-lg-10 col-xl-10"},[r("table",{staticClass:"table table-striped table-bordered table-hover table-condensed small"},[e.columns.length?r("thead",e._l(e.columns,function(t){return t.show?r("th",{key:"th-"+t.id},[e._v(e._s(t.name))]):e._e()})):e._e(),e.rows.length?r("tbody",e._l(e.rows,function(t){return r("tr",{key:"tr-"+t.id},e._l(e.columns,function(n){return n.show?r("td",{key:"td-"+t.id+"-"+n.id,class:"type"===n.id?"счёт"===t[n.id]?"warning":"success":""},[e._v(e._s(t[n.id]))]):e._e()}))})):e._e()]),e.rows.length?r("div",[r("p",[r("b",[e._v("Всего по счетам:")]),e._v(" "+e._s(e.total.invoices)+" р"),r("br"),r("b",[e._v("Всего по оплатам:")]),e._v(" "+e._s(e.total.payments)+" р"),r("br"),r("b",[e._v("Оплаты - счета:")]),e._v(" "+e._s(e.total.all)+" р")])]):e._e()])},c=[],d={computed:{total:function(){var e=0,t=0;return Array.isArray(this.rows)&&this.rows.length&&this.rows.forEach(function(r){r.hasOwnProperty("name")&&r.hasOwnProperty("num")?e+=parseFloat(r.sum):t+=parseFloat(r.sum)}),{invoices:e,payments:t,all:t-e}}},props:{columns:{required:!0,type:Array},rows:{required:!0,type:Array}}},f=d,p=r("2877"),v=Object(p["a"])(f,u,c,!1,null,null,null);v.options.__file="Content.vue";var m=v.exports,h=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"col-xs-12 col-sm-12 col-md-2 col-lg-2 col-xl-2"},[Object.keys(e.user).length?r("div",{staticClass:"well well-sm small"},[e.user.teacherId?e._e():r("div",[e.user.name?r("b",[e._v(e._s(e.user.name))]):e._e()]),e.user.teacherId?r("div",[e.user.name?r("b",[r("a",{attrs:{href:"/teacher/view?id="+e.user.teacherId}},[e._v("\n          "+e._s(e.user.name)+"\n        ")])]):e._e()]):e._e(),e.user.role?r("div",[r("i",[e._v(e._s(e.user.role))])]):e._e(),"4"===e.user.roleId?r("div",[e._v(e._s(e.user.office))]):e._e()]):e._e(),Object.keys(e.user).length?r("div",[r("h4",[e._v("Фильтры:")]),r("form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[r("div",{staticClass:"form-group"},[r("select",{directives:[{name:"model",rawName:"v-model",value:e.year,expression:"year"}],staticClass:"form-control form-control-sm",on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.year=t.target.multiple?r:r[0]}}},e._l(e.years,function(t){return r("option",{key:"opt-"+t.value,domProps:{value:t.value}},[e._v(e._s(t.text))])}))]),e._m(0)])]):e._e()])},_=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"form-group"},[r("button",{staticClass:"btn btn-sm btn-info btn-block",attrs:{type:"submit"}},[r("span",{staticClass:"fa fa-filter",attrs:{"aria-hidden":"true"}}),e._v(" Применить")])])}],y={created:function(){this.year=this.filter},data:function(){return{year:""}},methods:{onSubmit:function(){this.setFilter(this.year)}},props:{filter:{required:!0,type:String},setFilter:{required:!0,type:Function},user:{required:!0,type:Object},years:{required:!0,type:Array}}},b=y,g=Object(p["a"])(b,h,_,!1,null,null,null);g.options.__file="Sidebar.vue";var w=g.exports,x=function(e){return Math.max.apply(null,e)},O={name:"app",components:{Content:m,Sidebar:w},computed:{columns:function(){return this.details.columns},rows:function(){var e=this;return this.filter?this.details.rows.filter(function(t){return t.date.substr(0,4)===e.filter}):this.details.rows}},created:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,r,n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([this.getStudentDetails(),this.getUserInfo()]);case 3:t=e.sent,this.details=t[0].data.detailsData,this.user=t[1].data.userData,r=this.prepareYears(t[0].data.detailsData.rows),n=r.filter,s=r.years,this.filter=String(n),this.years=s,this.loading=!1,e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](0),this.error=!0,this.loading=!1;case 16:case"end":return e.stop()}},e,this,[[0,12]])}));return function(){return e.apply(this,arguments)}}(),data:function(){return{details:{columns:[],rows:[]},error:!1,filter:"",loading:!0,user:{},years:[]}},methods:{getStudentDetails:function(){return l.a.post("/studname/detail?id=".concat(this.studentId))},getUserInfo:function(){return l.a.get("/user/get-info")},setFilter:function(e){this.filter=e},prepareYears:function(e){var t=Array.isArray(e)&&e.length?e.map(function(e){return e.date.substr(0,4)}):[],r=t.filter(function(e,t,r){return r.indexOf(e)===t}),n=[{text:"-выбрать год-",value:""}];return{filter:r.length?x(r.map(function(e){return parseInt(e)})):"",years:n.concat(r.map(function(e){return{text:e,value:e}}))}}},props:{studentId:{required:!0,type:Number}}},C=O,j=Object(p["a"])(C,s,a,!1,null,null,null);j.options.__file="App.vue";var S=j.exports,k=r("2f62");n["a"].use(k["a"]);var I=new k["a"].Store({state:{},mutations:{},actions:{}}),P=document.getElementById("app");n["a"].config.productionTip=!1,new n["a"]({store:I,render:function(e){return e(S,{props:{studentId:P.dataset.student}})}}).$mount("#app")}});
//# sourceMappingURL=app.js.map